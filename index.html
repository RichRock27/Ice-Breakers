<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Icebreaker Experience: Director's Cut</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --brand: #c67c48;
      --brand-dark: #995a33;
      --gold: #ffd700;
      --curtain: #8b4513;
      --curtain-shadow: #5a2d0c;
    }

    body {
      margin: 0;
      overflow: hidden;
      background: #000;
      font-family: 'Segoe UI', sans-serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* THE STAGE */
    .stage-container {
      width: 100%;
      height: 100%;
      position: relative;
      background: radial-gradient(circle at 50% 30%, #3e1e0d 0%, #000 70%);
      perspective: 1200px;
      overflow: hidden;
    }

    /* CURTAINS */
    .curtain {
      position: absolute;
      top: 0;
      height: 100%;
      width: 50%;
      background: repeating-linear-gradient(90deg, var(--curtain), var(--curtain) 40px, var(--curtain-shadow) 60px, var(--curtain) 80px);
      box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.7);
      transition: transform 1.5s cubic-bezier(0.25, 1, 0.5, 1);
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .curtain.left {
      left: 0;
      transform-origin: left;
      border-right: 4px solid var(--gold);
    }

    .curtain.right {
      right: 0;
      transform-origin: right;
      border-left: 4px solid var(--gold);
    }

    .stage-open .curtain.left {
      transform: translateX(-90%);
    }

    .stage-open .curtain.right {
      transform: translateX(90%);
    }

    /* CURTAIN LOGO */
    .curtain-logo {
      position: absolute;
      top: 40%;
      width: 100%;
      opacity: 0.9;
      mix-blend-mode: normal;
      pointer-events: none;
      display: flex;
      align-items: center;
    }

    .curtain.left .curtain-logo h1 {
      width: 100%;
      text-align: right;
      margin: 0;
      padding-right: 10px;
    }

    .curtain.right .curtain-logo h1 {
      width: 100%;
      text-align: left;
      margin: 0;
      padding-left: 10px;
    }

    /* MAIN CONTENT AREA BEHIND CURTAIN */
    .screen {
      position: absolute;
      inset: 10%;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 50px rgba(255, 215, 0, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      opacity: 0;
      transition: opacity 0.5s;
      padding: 40px;
      border: 8px solid var(--gold);
      z-index: 5;
    }

    .stage-open .screen {
      opacity: 1;
    }

    /* HOST AVATAR */
    .host-actor {
      position: absolute;
      bottom: -50px;
      left: 50%;
      width: 250px;
      height: 380px;
      transform: translateX(-50%) translateY(20px);
      transition: left 1.5s ease-in-out, transform 0.5s;
      z-index: 20;
      pointer-events: none;
    }

    .host-img {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
      animation: floatHost 3s ease-in-out infinite;
    }

    @keyframes floatHost {
      50% {
        transform: translateY(-10px);
      }
    }

    /* HOST POSITIONS */
    .host-actor.pos-left {
      left: 15%;
    }

    .host-actor.pos-right {
      left: 85%;
    }

    .host-actor.pos-center {
      left: 50%;
    }

    .host-actor.hidden {
      transform: translateX(-50%) translateY(450px);
    }

    /* SPEECH BUBBLE */
    .bubble {
      position: absolute;
      bottom: 400px;
      left: 50%;
      transform: translateX(-50%) scale(0);
      background: #fff;
      color: #000;
      padding: 20px 30px;
      border-radius: 30px;
      font-size: 20px;
      font-weight: 600;
      width: 300px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border: 2px solid var(--brand);
      z-index: 50;
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .bubble::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 15px 15px 0;
      border-style: solid;
      border-color: #fff transparent transparent;
    }

    .bubble.show {
      transform: translateX(-50%) scale(1);
    }

    /* CONTROLS / INTERACTIVE UI */
    .ui-layer {
      position: absolute;
      inset: 0;
      z-index: 100;
      /* FORCE ABOVE EVERYTHING */
      pointer-events: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .btn {
      pointer-events: auto;
      cursor: pointer;
      padding: 15px 40px;
      font-size: 22px;
      font-weight: bold;
      color: white;
      background: linear-gradient(135deg, var(--brand), var(--brand-dark));
      border: none;
      border-radius: 50px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
      transform: scale(0.9);
      opacity: 0;
      transition: all 0.3s;
      margin-top: 20px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .btn.visible {
      transform: scale(1);
      opacity: 1;
    }

    .btn:hover {
      transform: scale(1.05);
      filter: brightness(1.1);
      box-shadow: 0 0 20px var(--gold);
    }

    .btn-dod {
      background: linear-gradient(135deg, #4b0082, #8a2be2);
      box-shadow: 0 0 30px rgba(138, 43, 226, 0.6);
      font-size: 28px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    /* PARTICIPANT DISPLAY */
    .participant-big {
      font-size: 80px;
      font-weight: 900;
      color: var(--brand-dark);
      text-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transform: scale(0.8);
      transition: 0.5s;
    }

    .participant-big.show {
      opacity: 1;
      transform: scale(1);
    }

    /* DIE OF DESTINY 3D */
    .die-container {
      width: 150px;
      height: 150px;
      perspective: 600px;
      display: none;
      margin-top: 30px;
    }

    .die-container.active {
      display: block;
    }

    .die {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transform: rotateX(0) rotateY(0);
    }

    .die.rolling {
      animation: rollDie 0.6s linear infinite;
    }

    .face {
      position: absolute;
      width: 150px;
      height: 150px;
      background: rgba(255, 255, 255, 0.95);
      border: 2px solid #ccc;
      border-radius: 20px;
      font-size: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.1);
      backface-visibility: hidden;
      font-weight: bold;
      color: #333;
    }

    .f1 {
      transform: rotateY(0deg) translateZ(75px);
    }

    .f2 {
      transform: rotateY(90deg) translateZ(75px);
    }

    .f3 {
      transform: rotateY(180deg) translateZ(75px);
    }

    .f4 {
      transform: rotateY(-90deg) translateZ(75px);
    }

    .f5 {
      transform: rotateX(90deg) translateZ(75px);
    }

    .f6 {
      transform: rotateX(-90deg) translateZ(75px);
    }

    @keyframes rollDie {
      0% {
        transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
      }

      25% {
        transform: rotateX(180deg) rotateY(90deg) rotateZ(45deg);
      }

      50% {
        transform: rotateX(360deg) rotateY(180deg) rotateZ(90deg);
      }

      75% {
        transform: rotateX(540deg) rotateY(270deg) rotateZ(135deg);
      }

      100% {
        transform: rotateX(720deg) rotateY(360deg) rotateZ(180deg);
      }
    }

    /* QUESTION CARD */
    .q-card {
      padding: 40px;
    }

    .q-num {
      font-size: 24px;
      color: var(--gold);
      font-weight: bold;
      background: #000;
      padding: 5px 15px;
      border-radius: 20px;
      display: inline-block;
      margin-bottom: 20px;
    }

    .q-text {
      font-size: 40px;
      font-weight: bold;
      color: #222;
      margin-bottom: 30px;
      line-height: 1.3;
    }

    /* CHOICE & CONFIRM PANELS */
    .choice-panel,
    .confirm-panel {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .choice-panel.active,
    .confirm-panel.active {
      display: flex;
    }

    .input-wrapper {
      display: flex;
      gap: 10px;
      opacity: 0;
      transform: translateY(20px);
      transition: 0.5s;
      pointer-events: auto;
    }

    .input-wrapper.show {
      opacity: 1;
      transform: translateY(0);
    }

    input.num-in {
      padding: 15px;
      font-size: 20px;
      border-radius: 10px;
      border: 2px solid #ccc;
      width: 100px;
      text-align: center;
    }

    /* SOUND TOGGLE */
    .sound-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 100;
      font-size: 30px;
      cursor: pointer;
      filter: drop-shadow(0 2px 4px #000);
      opacity: 0.7;
    }

    /* DECOYFACES */
    .face.decoy {
      color: #8a2be2;
      font-size: 40px;
    }

    /* ANNOUNCER CAPTIONS */
    #announcerCaptions {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 10px 25px;
      border-radius: 10px;
      font-size: 24px;
      font-weight: 500;
      z-index: 100;
      display: none;
      max-width: 80%;
      text-align: center;
      border-bottom: 3px solid var(--gold);
      pointer-events: none;
    }
  </style>
</head>

<body>
  <div class="sound-btn" onclick="toggleSound()">üîä</div>
  <div id="announcerCaptions"></div>

  <div class="stage-container" id="stage">
    <!-- CURTAINS -->
    <div class="curtain left" id="cLeft">
      <div class="curtain-logo">
        <h1 style="font-size: 60px; color: var(--gold); text-shadow: 0 4px 10px rgba(0,0,0,0.5);">PROPERTY</h1>
      </div>
    </div>
    <div class="curtain right" id="cRight">
      <div class="curtain-logo">
        <h1 style="font-size: 60px; color: var(--gold); text-shadow: 0 4px 10px rgba(0,0,0,0.5);">ALLIANCE</h1>
      </div>
    </div>

    <!-- SCREEN (Behind Curtains) -->
    <div class="screen" id="screen">
      <div class="participant-big" id="partDisplay">?</div>

      <!-- CONFIRM PANEL -->
      <div class="confirm-panel" id="confirmPanel">
        <div style="font-size: 24px; color: #555; margin-bottom: 10px;">Are they present?</div>
        <div style="display: flex; gap: 20px;">
          <button class="btn visible" style="background: #28a745;" onclick="confirmPresence(true)">‚úÖ
            YES</button>
          <button class="btn visible" style="background: #dc3545;" onclick="confirmPresence(false)">‚ùå
            NO</button>
        </div>
      </div>

      <!-- CHOICE PANEL -->
      <div class="choice-panel" id="choicePanel">
        <button class="btn btn-dod" id="btnDod" onclick="chooseDOD()">
          <span>üé≤</span> DIE OF DESTINY
        </button>

        <div style="color:#aaa; margin: 10px;">‚Äî OR ‚Äî</div>

        <div class="input-wrapper show">
          <input type="number" id="manualNum" class="num-in" placeholder="#" min="1" max="212">
          <button class="btn" style="transform:scale(1); opacity:1; padding: 10px 20px; margin:0;"
            onclick="chooseManual()">GO</button>
        </div>
      </div>

      <!-- DIE -->
      <div class="die-container" id="dieCont">
        <div class="die" id="theDie">
          <div class="face f1">?</div>
          <div class="face f2 decoy">üí©</div>
          <div class="face f3">12</div>
          <div class="face f4 decoy">üî•</div>
          <div class="face f5">88</div>
          <div class="face f6 decoy">ü¶Ñ</div>
        </div>
      </div>

      <!-- FINAL QUESTION -->
      <div class="q-card" id="finalQ" style="display:none;">
        <div class="q-num" id="qNumBadge">#--</div>
        <div class="q-text" id="qTextView"></div>
        <div style="display: flex; gap: 15px; justify-content: center;">
          <button class="btn visible" onclick="resetGame()">Start Over üîÑ</button>
          <button class="btn visible" style="background: #6c757d;" onclick="rerollQuestion()">New Question
            üé≤</button>
        </div>
      </div>
    </div>

    <div class="host-actor hidden" id="host">
      <div class="bubble" id="bubble"></div>
      <svg class="host-img" viewBox="0 0 300 450" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="skin" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#8d5524" />
            <stop offset="100%" stop-color="#6d3e17" />
          </linearGradient>
          <linearGradient id="suitGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#2c3e50" />
            <stop offset="100%" stop-color="#1a252f" />
          </linearGradient>
        </defs>
        <path d="M120 180 L 120 230 L 180 230 L 180 180" fill="url(#skin)" />
        <path d="M120 230 Q 150 245 180 230" fill="rgba(0,0,0,0.2)" />
        <path d="M150 230 L 120 230 L 150 450 L 180 230 Z" fill="#ffffff" />
        <path d="M150 230 L 140 245 L 140 340 L 150 355 L 160 340 L 160 245 Z" fill="#c0392b" />
        <path d="M60 230 Q 150 215 240 230 L 260 450 L 180 450 L 150 300 L 120 450 L 40 450 Z" fill="url(#suitGrad)" />
        <path d="M120 230 L 150 310 L 90 280 Z" fill="#1c2833" stroke="#111" stroke-width="0.5" />
        <path d="M180 230 L 150 310 L 210 280 Z" fill="#1c2833" stroke="#111" stroke-width="0.5" />
        <g transform="translate(150, 140)">
          <ellipse cx="0" cy="0" rx="55" ry="70" fill="url(#skin)" />
          <ellipse cx="-55" cy="0" rx="10" ry="15" fill="url(#skin)" />
          <ellipse cx="55" cy="0" rx="10" ry="15" fill="url(#skin)" />
          <path d="M-20 60 Q 0 85 20 60 L 15 45 Q 0 55 -15 45 Z" fill="#222" />
          <path d="M-20 35 Q 0 45 20 35" stroke="#3e1e0c" stroke-width="3" fill="none" stroke-linecap="round" />
          <path d="M-8 10 Q 0 25 8 20" stroke="#5a2d0c" stroke-width="3" fill="none" />
          <path d="M-15 -10 Q 0 -15 15 -10" stroke="#333" stroke-width="2" />
          <circle cx="-30" cy="-5" r="16" stroke="#444" stroke-width="2" fill="rgba(255,255,255,0.2)" />
          <circle cx="30" cy="-5" r="16" stroke="#444" stroke-width="2" fill="rgba(255,255,255,0.2)" />
          <circle cx="-30" cy="-5" r="4" fill="#111" />
          <circle cx="30" cy="-5" r="4" fill="#111" />
          <path d="M-45 -25 Q -30 -35 -15 -25" stroke="#222" stroke-width="4" fill="none" />
          <path d="M15 -25 Q 30 -35 45 -25" stroke="#222" stroke-width="4" fill="none" />
        </g>
      </svg>
    </div>

    <!-- Intro Button -->
    <div class="ui-layer">
      <button class="btn visible" id="startBtn" onclick="startShow()">üé§ START SHOW</button>
    </div>
  </div>

  <script>
    const MOCK_QUESTIONS = [
      "If you could have dinner with any historical figure, who would it be?",
      "What is the most useless talent you have?",
      "If you were a wrestler, what would your entrance theme song be?",
      "What was your favorite cartoon growing up?",
      "If you could instantly learn any language, which one would it be?",
      "What is the weirdest food you have ever eaten?",
      "If you could teleport anywhere right now, where would you go?",
      "What is your 'guilty pleasure' song?",
      "If you could have any animal as a domesticated pet, what would you choose?",
      "What is the best piece of advice you've ever received?",
      "If you had to eat one meal for the rest of your life, what would it be?",
      "What is your favorite holiday and why?",
      "If you were a superhero, what would your power be?",
      "What is the last book you read?",
      "Who is your favorite fictional character?",
      "If you won the lottery today, what is the first thing you would buy?",
      "What is the most adventurous thing you've ever done?",
      "If you could live in any TV show universe, which one would it be?",
      "What is your favorite board game?",
      "If you could switch lives with anyone for a day, who would it be?",
      "What is the funniest joke you know by heart?",
      "If you were stranded on a deserted island, what three items would you want?",
      "What is your favorite season?",
      "If you could only watch one movie forever, what would it be?",
      "What is your favorite dessert?",
      "If you were famous, what would you be famous for?",
      "What is the most embarrassing fashion trend you followed?",
      "If you could have a conversation with your younger self, what would it say?",
      "What is your favorite way to spend a weekend?",
      "If you could time travel, would you go to the past or the future?",
      "What is the best gift you have ever received?",
      "If you could own a fictional vehicle (Batmobile, DeLorean, etc.), which one?",
      "What is your go-to karaoke song?",
      "If you could have an unlimited supply of one thing, what would it be?",
      "What is your favorite childhood memory?",
      "If you could bring back any cancelled TV show, which one?",
      "What is your favorite smell?",
      "If you could be an Olympic athlete, what sport would you compete in?",
      "What is the most interesting documentary you've watched?",
      "If you had a warning label, what would it say?",
      "What is your favorite breakfast food?",
      "If you could meet any celebrity, who would it be?",
      "What is the scariest movie you've ever seen?",
      "If you could learn any instrument, what would it be?",
      "What is your dream car?",
      "If you could act in any movie genre, which would you pick?",
      "What is the best concert you've ever been to?",
      "If you could have any job in the world, what would it be?",
      "What is your favorite app on your phone?",
      "If you were a ghost, who would you haunt?",
      "What is the most spontaneous thing you've ever done?",
      "What was your first job?",
      "If you could live anywhere in the world, where would it be?",
      "What is your favorite ice cream flavor?",
      "Do you have any phobias?",
      "What is a skill you'd like to learn in the next year?",
      "If you could be capturing any moment in history on camera, what would it be?",
      "What is the best compliment you've ever received?",
      "What is your favorite family tradition?",
      "If you could eliminate one thing from your daily routine, what would it be?",
      "What is your favorite thing about your current job?",
      "If you could have a superpower but it had to be mundane, what would it be?",
      "What is the most interesting place you‚Äôve visited?",
      "If you could play any sport professionally, what would it be?",
      "What is your favorite type of cuisine?",
      "If you could have a personal chef, cleaner, or chauffeur, which would you pick?",
      "What is the best movie ending of all time?",
      "If you were a video game character, what would your stats be?",
      "What is your favorite quote?",
      "If you could see any band (dead or alive) in concert, who would it be?",
      "What is your favorite thing to do on a rainy day?",
      "If you were forced to participate in a reality TV show, which one would you choose?",
      "What is a small act of kindness you were shown that you'll never forget?",
      "If you could design a planet, what would it look like?",
      "What is your favorite sandwich?",
      "If you could be any age for a week, what age would you be?",
      "What is the most interesting fact you know?",
      "If you could have a robot do one chore for you, what would it be?",
      "What is your favorite way to relax?",
      "If you could write a book, what genre would it be?",
      "What is the best purchase you've made this year?",
      "If you could be a master of any martial art, which one would you choose?",
      "What is your favorite smell in nature?",
      "If you could have a secret hideout, where would it be?",
      "What is your favorite accent?",
      "If you could be any fictional villain, who would you be?",
      "What is the most impressive thing you can cook?",
      "If you could change your name, what would you change it to?",
      "What is your favorite board game to play with friends?",
      "If you could have any view from your window, what would it be?",
      "What is the funniest thing that has caught you off guard?",
      "If you could be an expert in any field of science, what would it be?",
      "What is your favorite animated movie?",
      "If you could have a museum dedicated to you, what would be in it?",
      "What is your favorite classic rock song?",
      "If you could be a contestant on any game show, which one would you choose?",
      "What is the most beautiful place you've ever seen?",
      "If you could have a lifetime supply of any beverage, what would it be?",
      "What is your favorite thing about yourself?",
      "If you could be a character in Star Wars, who would you be?",
      "What is the best prank you've ever pulled or had pulled on you?",
      "If you could lock one person in a room with a hungry lion, who... just kidding. Who is your hero?",
      "What is your favorite emoji?",
      "If you could be a fly on the wall in any room in the world, where would you be?",
      "What is the most memorable dream you've ever had?",
      "If you could have any car from history, what would it be?",
      "What is your favorite dipping sauce?",
      "If you could be famous for one thing, what would it be (other than your job)?",
      "What is the most unusual pet you've ever seen?",
      "If you could have a theme park based on your life, what would the main ride be?",
      "What is your favorite word?",
      "If you could be fluent in every language, how would you use that skill?",
      "What is the most breathtaking natural wonder you've seen?",
      "If you could have a personal assistant for one task, what would it be?",
      "What is your favorite video game of all time?",
      "If you could be a pirate or a ninja, which would you choose?",
      "What is the best piece of advice you would give to your 18-year-old self?",
      "If you could have a dinner party with three fictional characters, who would they be?",
      "What is your favorite type of cheese?",
      "If you could be the CEO of any company, which one would it be?",
      "What is the most unique souvenir you've ever bought?",
      "If you could have a magic pocket that always produced one specific item, what would it be?",
      "What is your favorite fast food restaurant?",
      "If you could be a professional gamer, what game would you play?",
      "What is the most interesting thing you've learned recently?",
      "If you could have a statue made of you, what pose would you be in?",
      "What is your favorite type of weather?",
      "If you could be a cartoon character, who would you be?",
      "What is the best compliment you've given someone?",
      "If you could have a limitless budget for one hobby, what would it be?",
      "What is your favorite song to dance to?",
      "If you could be a detective in any fictional universe, where would you want to solve crimes?",
      "What is the most nostalgic smell for you?",
      "If you could have a personal soundtrack play when you enter a room, what song would it be?",
      "What is your favorite type of pizza?",
      "If you could be a teacher, what subject would you teach?",
      "What is the most awe-inspiring thing you've ever seen?",
      "If you could have a conversation with an alien, what would you ask them?",
      "What is your favorite type of cookie?",
      "If you could be a classic movie star, who would you be?",
      "What is the most ridiculous thing you've ever bought?",
      "If you could have a treehouse, what would it look like?",
      "What is your favorite type of chocolate?",
      "If you could be a character in Harry Potter, which house would you be in?",
      "What is the best way to spend a rainy Sunday?",
      "If you could have a robot butler, what would you name it?",
      "What is your favorite type of flower?",
      "If you could be a master of any musical instrument, what would it be?",
      "What is the most interesting historical fact you know?",
      "If you could have a personalized license plate, what would it say?",
      "What is your favorite type of shoe?",
      "If you could be a character in a fantasy novel, what race (elf, dwarf, etc.) would you be?",
      "What is the best way to start the day?",
      "If you could have a secret talent, what would it be?",
      "What is your favorite type of tea or coffee?",
      "If you could be a racing driver, what kind of car would you race?",
      "What is the most memorable meal you've ever had?",
      "If you could have a personal library, what kind of books would fill it?",
      "What is your favorite type of pasta?",
      "If you could be a character in a sci-fi movie, who would you be?",
      "What is the best way to de-stress?",
      "If you could have a garden full of any plant, what would it be?",
      "What is your favorite type of cake?",
      "If you could be a legend in any sport, which one would it be?",
      "What is the most beautiful city you've ever visited?",
      "If you could have a pet dragon, what would you name it?",
      "What is your favorite type of soup?",
      "If you could be a character in a horror movie, would you be the hero or the villain?",
      "What is the best piece of technology you own?",
      "If you could have a superpower that only worked on weekends, what would it be?",
      "What is your favorite type of bread?",
      "If you could be a character in a western movie, who would you be?",
      "What is the most relaxing place you've ever been?",
      "If you could have a personal spaceship, where would you go first?",
      "What is your favorite type of fruit?",
      "If you could be a character in a musical, which one would you choose?",
      "What is the best way to spend a Friday night?",
      "If you could have a secret underground lair, what would be inside?",
      "What is your favorite type of mood?",
      "If you could be a character in a comedy movie, who would you be?",
      "What is the most interesting job you've ever heard of?",
      "If you could have a personal island, what would you name it?",
      "What is your favorite type of candy?",
      "If you could be a character in a mystery novel, who would you be?",
      "What is the best way to end the day?",
      "If you could have a personal submarine, where would you explore?",
      "What is your favorite type of nut?",
      "If you could be a character in a romance movie, who would you be?",
      "What is the most inspiring story you've ever heard?",
      "If you could have a personal jet, where would you fly?",
      "What is your favorite type of vegetable?",
      "If you could be a character in an action movie, who would you be?",
      "What is the best way to celebrate a birthday?",
      "If you could have a personal time machine, when would you visit?",
      "What is your favorite type of meat?",
      "If you could be a character in a drama movie, who would you be?",
      "What is the most exciting thing you've ever done?",
      "If you could have a personal teleporter, where would you go?",
      "What is your favorite type of fish?",
      "If you could be a character in a thriller movie, who would you be?",
      "What is the best way to spend a vacation?",
      "If you could have a personal cloning machine, what would you clone?",
      "What is your favorite type of bird?",
      "If you could be a character in a documentary, who would you be?",
      "What is the most fascinating animal you know?",
      "If you could have a personal invisibility cloak, what would you do?",
      "What is your favorite type of insect?",
      "If you could be a character in a short story, who would you be?",
      "What is the best way to spend a holiday?",
      "If you could have a personal robot army, what would you do?",
      "What is your favorite type of reptile?"
    ];

    const script = {
      locations: ["Lyve from Burbank Studios!", "Coming to you lyve from the office!"],
      intros: ["Welcome team! It's showtime!", "Get ready to break the ice!"],
      hostNames: ["Richie 'The Closer' Green", "Marsha Mellow", "Chip Munk", "Neil Down", "Paige Turner"],
      greetings: ["Thank you! You're too kind!", "Wow! What a crowd!", "Let's get this party started!"],
      presenceChecks: ["Is ${name} actually here?", "Paging ${name}! Are you out there?", "Is ${name} in the house?"],
      choicePrompts: ["Choose your destiny!", "The power is in your hands!", "Pick a number or roll the die!"],
      absentReactions: ["Ghosting me? Fine! Next!", "Not here? Scandalous!", "Moving on..."],
      rerollComments: ["Too tough? Let's spin it again!", "Switching it up!", "No problem, let's find another one!"],
      manualComments: ["I wouldn't have picked that, but you be you.", "Bold choice.", "Let's see what's behind that door."],
      winnerComments: ["big day for you!", "this is your moment!", "the spotlight is yours!"],
      dodPuns: ["Like the rock said to the hill... Let's ROLL!", "Roll it!"],
      dieReactions: ["Oh man, I was hoping for the Unicorn...", "The Die has spoken!"],
      preShuffleComments: ["Let's see who our lucky participant is today...", "Who will be the chosen one?"]
    };
    function getRandom(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

    let audioCtx = null, soundOn = true, announcerVoice = null, voicesLoaded = false, usedQuestions = [];
    let usedParticipants = [], currentParticipant = "";
    const employeeList = ['Rich', 'Zack', 'Lulu', 'Lauren', 'Brad', 'Chase', 'Matt'];

    function loadVoices() {
      const voices = window.speechSynthesis.getVoices();
      if (voices.length > 0) {
        const filtered = voices.filter(v => !['Fred', 'Cellos', 'Organ', 'Bells', 'Good News', 'Bad News', 'Pipe Organ', 'Zarvox', 'Trinoids', 'Boing', 'Whisper', 'Albert', 'Hysterical', 'Bubbles'].some(bad => v.name.includes(bad)));
        announcerVoice = filtered.find(v => v.name.includes('Siri')) || filtered.find(v => v.name.includes('Daniel')) || filtered.find(v => v.name.includes('Alex')) || filtered[0];
        voicesLoaded = true;
      }
    }
    async function initAudio() {
      if (!audioCtx) { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); loadVoices(); window.speechSynthesis.onvoiceschanged = loadVoices; }
      if (audioCtx.state === 'suspended') await audioCtx.resume();
    }
    function toggleSound() { soundOn = !soundOn; document.querySelector('.sound-btn').style.opacity = soundOn ? 1 : 0.3; }
    function playTone(freq, type, duration, vol = 0.1) {
      if (!soundOn || !audioCtx) return;
      const osc = audioCtx.createOscillator(), gain = audioCtx.createGain();
      osc.type = type; osc.frequency.value = freq; osc.connect(gain); gain.connect(audioCtx.destination);
      osc.start(); gain.gain.setValueAtTime(vol, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration); osc.stop(audioCtx.currentTime + duration);
    }
    function playSpeechSound() { if (soundOn && audioCtx) playTone(400 + Math.random() * 150, 'sine', 0.05, 0.08); }
    function playRollSound(duration = 5000) { if (!soundOn || !audioCtx) return; const clicks = setInterval(() => { playTone(200 + Math.random() * 200, 'square', 0.05, 0.05); }, 100); setTimeout(() => { clearInterval(clicks); playTone(1200, 'sine', 0.8, 0.1); }, duration); }
    function playJingle() { if (!soundOn) return; initAudio();[293.66, 293.66, 293.66, 392.00, 440.00, 493.88, 523.25].forEach((f, i) => { setTimeout(() => playTone(f, 'square', 0.2, 0.1), i * 200); }); }
    function playFanfare() { if (!soundOn) return; initAudio();[523.25, 659.25, 783.99, 1046.50].forEach((f, i) => { setTimeout(() => playTone(f, 'triangle', 0.5, 0.1), i * 100); }); }
    function playApplause() { if (!soundOn) return; for (let i = 0; i < 15; i++) { setTimeout(() => { if (!soundOn || !audioCtx) return; const bufferSize = audioCtx.sampleRate * 0.2; const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate); const data = buffer.getChannelData(0); for (let j = 0; j < bufferSize; j++) data[j] = Math.random() * 2 - 1; const noise = audioCtx.createBufferSource(); noise.buffer = buffer; const gain = audioCtx.createGain(); gain.gain.setValueAtTime(0.05, audioCtx.currentTime); noise.connect(gain); gain.connect(audioCtx.destination); noise.start(); }, i * 100); } }

    async function announcerSay(text) {
      const cap = document.getElementById('announcerCaptions');
      cap.textContent = text.replace(/Lyve/g, 'Live'); cap.style.display = 'block';
      if (!soundOn) return new Promise(r => setTimeout(r, 2000)).then(() => cap.style.display = 'none');
      return new Promise(resolve => {
        const u = new SpeechSynthesisUtterance(text);
        if (announcerVoice) u.voice = announcerVoice;
        u.rate = 0.82; u.pitch = 1.0;
        u.onend = () => { cap.style.display = 'none'; resolve(); };
        window.speechSynthesis.speak(u);
      });
    }
    const host = document.getElementById('host'), bubble = document.getElementById('bubble');
    function moveHost(pos) { host.className = 'host-actor ' + pos; }
    const wait = ms => new Promise(r => setTimeout(r, ms));
    async function speak(text, duration = 2000) {
      bubble.textContent = ''; bubble.classList.add('show');
      for (let c of text.split('')) { bubble.textContent += c; if (c !== ' ') playSpeechSound(); await wait(50); }
      await wait(duration); bubble.classList.remove('show');
    }
    async function startShow() {
      await initAudio(); document.getElementById('startBtn').style.display = 'none';
      await announcerSay(getRandom(script.locations));
      await announcerSay(getRandom(script.intros));
      await announcerSay("And here is your host... " + getRandom(script.hostNames) + "!");
      moveHost('pos-center'); await wait(1000);
      await speak(getRandom(script.greetings));
      moveHost('pos-left'); document.getElementById('stage').classList.add('stage-open');
      shuffleParticipant();
    }
    async function shuffleParticipant() {
      const disp = document.getElementById('partDisplay'); disp.style.display = 'block'; disp.classList.add('show');
      let available = employeeList.filter(e => !usedParticipants.includes(e));
      if (available.length === 0) { usedParticipants = []; available = employeeList; }
      for (let i = 0; i < 12; i++) { disp.textContent = employeeList[Math.floor(Math.random() * employeeList.length)]; playTone(800, 'sine', 0.05); await wait(150 + (i * 40)); }
      currentParticipant = available[Math.floor(Math.random() * available.length)];
      usedParticipants.push(currentParticipant); disp.textContent = currentParticipant;
      disp.style.color = '#e23a2b'; disp.style.transform = "scale(1.2)";
      playFanfare(); confetti({ particleCount: 150, zIndex: 100, spread: 80, origin: { y: 0.6 } });
      await wait(1500); askPresence();
    }
    async function askPresence() { moveHost('pos-center'); await speak(getRandom(script.presenceChecks).replace('${name}', currentParticipant)); document.getElementById('confirmPanel').classList.add('active'); }
    function confirmPresence(isHere) {
      document.getElementById('confirmPanel').classList.remove('active');
      if (isHere) { moveHost('pos-right'); document.getElementById('choicePanel').classList.add('active'); }
      else { speak(getRandom(script.absentReactions), 2000).then(shuffleParticipant); }
    }
    function chooseManual() {
      const val = document.getElementById('manualNum').value; if (!val) return;
      document.getElementById('choicePanel').classList.remove('active');
      speak(`You chose number ${val}...`, 1500).then(() => {
        const q = MOCK_QUESTIONS[(parseInt(val) - 1) % MOCK_QUESTIONS.length];
        revealFinal({ number: val, question: q });
      });
    }
    function chooseDOD() {
      document.getElementById('choicePanel').classList.remove('active');
      moveHost('pos-center'); speak("You went with the Die of Destiny!", 1500);
      const dieCont = document.getElementById('dieCont'), theDie = document.getElementById('theDie');
      document.getElementById('partDisplay').style.display = 'none';
      dieCont.classList.add('active'); theDie.classList.add('rolling'); playRollSound(3000);
      setTimeout(() => {
        theDie.classList.remove('rolling'); dieCont.classList.remove('active');
        let available = MOCK_QUESTIONS.map((_, i) => i).filter(i => !usedQuestions.includes(i));
        if (available.length === 0) { usedQuestions = []; available = MOCK_QUESTIONS.map((_, i) => i); }
        const r = available[Math.floor(Math.random() * available.length)];
        usedQuestions.push(r);
        revealFinal({ number: r + 1, question: MOCK_QUESTIONS[r] });
      }, 3000);
    }
    function revealFinal(res) {
      host.style.right = "2%"; host.style.left = "auto"; host.style.transform = "scale(0.8) translateY(50px)";
      document.getElementById('finalQ').style.display = 'block';
      document.getElementById('qNumBadge').textContent = "#" + res.number;
      document.getElementById('qTextView').textContent = res.question;
      playFanfare(); confetti({ particleCount: 200, zIndex: 100, spread: 100, origin: { y: 0.6 } });
    }
    function resetGame() { location.reload(); }
    function rerollQuestion() {
      const r = Math.floor(Math.random() * MOCK_QUESTIONS.length);
      revealFinal({ number: r + 1, question: MOCK_QUESTIONS[r] });
    }
  </script>
</body>

</html>